### **2. 工厂方法模式（Factory Method）**

#### **定义**

工厂方法模式定义一个创建对象的接口（工厂接口），由子类实现具体对象的创建。每个具体类对应一个具体工厂，客户端通过调用工厂接口创建对象，符合“开闭原则”。

#### **适用场景**

- 系统需要高扩展性，经常需要添加新类型。
- 需要将对象的创建逻辑分散到各个子类中。
- 客户端只需要使用产品接口，无需知道具体实现。
- 示例场景：UI 组件库（按钮、文本框）、数据库连接（MySQL、PostgreSQL）。

#### **代码示例**

继续以支付系统为例，每个支付方式对应一个工厂类。


#### **优点**

- **符合开闭原则**：新增支付方式只需添加新工厂和产品类，无需修改现有代码。
- **单一职责**：每个工厂负责单一产品，职责清晰。
- **高扩展性**：适合需要频繁扩展的系统。

#### **缺点**

- **类数量增加**：每增加一种产品，需要新增一个产品类和一个工厂类，导致类数量翻倍。
- **复杂性增加**：代码结构比简单工厂复杂，维护成本稍高。
- **客户端需选择工厂**：客户端需要知道使用哪个具体工厂。

#### **适用场景示例**

- **UI 组件库**：根据主题（如暗色、亮色）创建按钮、窗口等。
- **数据库连接**：为 MySQL、PostgreSQL 等创建连接对象。
- **游戏角色创建**：为不同角色（战士、魔法师）创建工厂。